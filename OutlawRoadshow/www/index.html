<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

<link href="css/style.css" rel="stylesheet">
<link rel="stylesheet" href="css/jquery.mobile-1.4.2.min.css"> 
    <!-- compiled css output -->
    <link href="css/ionic.app.css" rel="stylesheet">

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <script src="lib/angular-websocket/angular-websocket.js"></script>
    <script src="lib/ngCordova/dist/ng-cordova.js"></script>
    <script src="lib/ionic-service-core/ionic-core.js"></script>
  <script src="lib/ionic-service-push/ionic-push.js"></script>
    <script type="text/javascript" src="phonegap.js"></script>
        
       <!-- <script type="text/javascript">
            app.initialize();
        </script>-->

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.11.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.4.2.min.js"></script>
    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
    <script type="text/javascript">
      var onDeviceReady = function() {
        console.log("Device ready!")
        // Incoming message callback
        var onPushReceived = function(event) {
          if (event.message) {
            console.log("Received push: " + event.message)
          } else {
            console.log("No incoming message")
          }
        }
         // Incoming message callback
        var onLaunchedFromPush = function(event) {
          if (event.message) {
            console.log("Launched from push: " + event.message)
          } else {
            console.log("No incoming message")
          }
        }
        // Registration callback
        var onRegistration = function(event)  {
          if (!event.error) {
            console.log("Reg Success: " + event.channelID)
            $('#id').text(event.channelID)
          } else {
            console.log(event.error)
          }
        }
        // Register for any urban airship events
        document.addEventListener("urbanairship.registration", onRegistration, false)
        document.addEventListener("urbanairship.push", onPushReceived, false)
        
        // Handle resume
        document.addEventListener("resume", function() {
          console.log("Device resume!")
          
          UAirship.resetBadge()
          UAirship.getLaunchNotification(true, onLaunchedFromPush)
          // Reregister for urbanairship events if they were removed in pause event
          document.addEventListener("urbanairship.registration", onRegistration, false)
          document.addEventListener("urbanairship.push", onPushReceived, false)
        }, false)
        // Handle pause
        document.addEventListener("pause", function() {
          console.log("Device pause!")
         
          // Remove urbanairship events.  Important on android to not receive push in the background.
          document.removeEventListener("urbanairship.registration", onRegistration, false)
          document.removeEventListener("urbanairship.push", onPushReceived, false)
        }, false)
        // Initiate the UI
        initiateUI()
        
        // Get the launch notification if its available.
        UAirship.getLaunchNotification(true, onLaunchedFromPush)
      }
      // Initiates the UI and sets up any UI callbacks
      var initiateUI = function() {
        // Add tag to the UI
        var addTag = function(tag) {
          var $tag = $("<p>" + tag + "</p>")
          var $removeButton = $("<input type='button' class='removeTagButton' value='Remove' />")
          $tag.append($removeButton)
          $("#tags").prepend($tag)
          $removeButton.on("click", function(ev) {
            $tag.remove()
            // Remove the tag from the current list of tags
            UAirship.getTags(function(tags) {
              console.log("Removing tag: " + tag)
              tags.splice(tags.indexOf(tag), 1)
              UAirship.setTags(tags)
            })
          })
        }
        // Set the alias in the UI
        var setAlias = function(alias) {
          $("#alias").text(alias)
          $("#setAliasField").val("")
        }
        // Vibrate and Sound is only available on Android
        if (device.platform != "Android") {
          $("#soundEnabledSection").hide()
          $("#vibrateEnabledSection").hide()
        }
        // Update the interface with the current UA settings
        UAirship.isUserNotificationsEnabled(function(isEnabled) {
          $('#pushEnabled').val(isEnabled ? 'on' : 'off').change()
        })
        UAirship.isSoundEnabled(function(isEnabled) {
          $('#soundEnabled').val(isEnabled ? 'on' : 'off').change()
        })
        UAirship.isVibrateEnabled(function(isEnabled) {
          $('#vibrateEnabled').val(isEnabled ? 'on' : 'off').change()
        })
        UAirship.isQuietTimeEnabled(function(isEnabled) {
          $('#quietTimeEnabled').val(isEnabled ? 'on' : 'off').change()
        })
        UAirship.isLocationEnabled(function(isEnabled) {
          $('#locationEnabled').val(isEnabled ? 'on' : 'off').change()
        })
        UAirship.getChannelID(function(id) {
          if(id) {
             console.log("Got channel ID: " + id)
             $('#id').text(id)
          }
        })
        UAirship.getAlias(function(alias) {
          if(alias) {
            console.log("Got alias: " + alias)
            setAlias(alias)
          }
        })
        UAirship.getTags(function(tags) {
          tags.forEach(function(tag) {
            addTag(tag)
          })
        })
        UAirship.getQuietTime(function(obj) {
          $("#startHour").val(obj.startHour)
          $("#startMinute").val(obj.startMinute)
          $("#endHour").val(obj.endHour)
          $("#endMinute").val(obj.endMinute)
        })
        // Set up change callbacks for the UI elements
        $('#pushEnabled').change(function() {
          var isEnabled = ($('#pushEnabled').val() == "on")
          UAirship.setUserNotificationsEnabled(isEnabled)
        })
        $('#locationEnabled').change(function() {
          var isEnabled = ($('#locationEnabled').val() == "on")
          UAirship.setLocationEnabled(isEnabled)
        })
        $('#soundEnabled').change(function() {
          var isEnabled = ($('#soundEnabled').val() == "on")
          UAirship.setSoundEnabled(isEnabled)
        })
        $('#vibrateEnabled').change(function() {
          var isEnabled = ($('#vibrateEnabled').val() == "on")
          UAirship.setVibrateEnabled(isEnabled)
        })
        $('#quietTimeEnabled').change(function() {
          var isEnabled = ($('#quietTimeEnabled').val() == "on")
          UAirship.setQuietTimeEnabled(isEnabled)
        })
        $("#addTagButton").click(function(ev) {
          var tag = $("#addTagField").val()
          console.log("Adding new tag: " + tag)
          UAirship.getTags(function(tags) {
            if(tags.indexOf(tag) == -1) {
              console.log("Valid tag: " + tag)
              tags = tags.concat([tag])
              UAirship.setTags(tags, function() {
                addTag(tag)
                $("#addTagField").val('')
              })
            }
          })
        })
        $("#setQuietTimeButton").click(function(ev) {
          var startHour = parseInt($("#startHour").val())
          var startMinute = parseInt($("#startMinute").val())
          var endHour = parseInt($("#endHour").val())
          var endMinute = parseInt($("#endMinute").val())
          UAirship.setQuietTime(startHour, startMinute, endHour, endMinute, function() {
            console.log("Set quiet time from JS")
          })
        })
        $("#setAliasButton").click(function(ev) {
          var alias = $("#setAliasField").val()
          UAirship.setAlias(alias, function() {
            setAlias(alias)
          })
        })
      }
      document.addEventListener("deviceready", onDeviceReady, false)
    </script>
 <script>
      function goToPage() {
        var pageUrl = ["{{artist.url}}"];
        window.open(pageUrl, '_system');
      }
  
    </script>
     <!--<script>
            document.onclick = function (e) {
                e = e ||  window.event;
                var element = e.target || e.srcElement;
 
                if (element.tagName == 'A') {
                    window.open(element.href, "_system", "location=yes");
                    return false; // prevent default action and stop event propagation
                }
            };
        </script>-->

  </head>
<body onload="init();" ng-app="starter">

    <!--
      The views will be rendered in the <ion-nav-view> directive below
      Templates are in the /templates folder (but you could also
      have templates inline in this html file if you'd like).
    -->
      <ion-nav-view></ion-nav-view>
     
     
     <!-- this call the script for my google maps attempt it includes the API key i generated
            
           <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCrLTQ9Q9eo9PAIPrt8Co6n2sz6NONF-lE&sensor=true"></script>   -->
  </body>
</html>



